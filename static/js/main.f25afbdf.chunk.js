(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},37:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a(17),i=a.n(r),n=(a(25),a(18)),c=a(6),o=a(7),l=a(9),h=a(8),d=(a(26),a(27),a(5)),u=a(0),j=[],m=function(e){var t=e.movies,a=e.filteredMovies,s=t.map((function(e){return Object(u.jsx)(d.b,{to:"/".concat(e.id),id:e.id,className:"movie-card",children:Object(u.jsx)("img",{className:"movie-poster",src:e.poster_path,alt:"".concat(e.title," poster")})},e.id)}));return a&&(j=a.map((function(e){return Object(u.jsx)(d.b,{to:"/".concat(e.id),id:e.id,className:"movie-card",children:Object(u.jsx)("img",{className:"movie-poster",src:e.poster_path,alt:"".concat(e.title," poster")})},e.id)}))),Object(u.jsxs)("div",{className:"movies-display",children:[j.length>0&&Object(u.jsx)("div",{className:"movie-container",children:j}),s.length>0&&!j.length&&Object(u.jsx)("div",{className:"movie-container",children:s})]})},v=a(2),p=(a(37),a(11)),b=a.n(p),O=a(16),x=function(){var e=Object(O.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://rancid-tomatillos.herokuapp.com/api/v2/movies",e.next=3,fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Movies failed to load. Please try again later!");case 6:return e.next=8,t.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(b.a.mark((function e(t){var a,s,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(t),e.next=3,fetch(a);case 3:if((s=e.sent).ok){e.next=6;break}throw new Error("We don't have that movie yet, sorry!");case 6:return e.next=8,s.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=a(39),N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this)).state={details:{},error:"",isLoadingDetails:!1},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.stateChange("filteredMovies",[]),this.setState({isLoadingDetails:!0}),f(this.props.selectedID).then((function(t){return e.setState({details:t.movie,isLoadingDetails:!1})})).catch((function(t){return e.setState({error:t.message,isLoadingDetails:!1})}))}},{key:"render",value:function(){var e=this.state.details;return Object(u.jsxs)("div",{className:"detail-page",children:[this.state.isLoadingDetails&&Object(u.jsx)("h2",{children:"Loading Movie Details..."}),this.state.error&&Object(u.jsxs)("div",{className:"error-page",children:[Object(u.jsx)("h2",{className:"error-message",children:this.state.error}),Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)("img",{src:"/back-arrow-1.svg",className:"arrow-icon",alt:"Back arrow"})})]}),e.title&&!this.state.error&&Object(u.jsxs)("div",{className:"movie-details",children:[Object(u.jsxs)("div",{className:"movie-info",children:[Object(u.jsx)("div",{className:"title-container",children:Object(u.jsx)("h1",{className:"movie-title",children:e.title})}),e.tagline&&Object(u.jsx)("p",{className:"tagline",children:Object(u.jsx)("em",{children:'"'.concat(e.tagline,'"')})}),Object(u.jsx)("p",{className:"detail-rating",children:"\u2b50\ufe0f  ".concat(e.average_rating.toFixed(1)," ")}),Object(u.jsx)("p",{className:"movie-overview",children:e.overview}),e.budget>0&&Object(u.jsxs)("p",{className:"budget",children:["Budget: $ ",e.budget]}),e.revenue>0&&Object(u.jsxs)("p",{className:"revenue",children:["Revenue: $ ",e.revenue]}),e.runtime>0&&Object(u.jsxs)("p",{className:"runtime",children:["Runtime: ",e.runtime," mins"]}),Object(u.jsxs)("p",{className:"movie-releaseDate",children:["Released on ",g(e.release_date).format("MMMM DD, YYYY")]}),Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)("img",{src:"/back-arrow-1.svg",className:"arrow-icon",alt:"Back arrow"})})]}),Object(u.jsx)("img",{className:"movie-cover",src:e.poster_path,alt:"".concat(e.title," Poster")}),Object(u.jsx)("img",{className:"movie-backdrop",src:e.backdrop_path,alt:"".concat(e.title," Backdrop")})]})]})}}]),a}(s.Component),w=(a(40),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).movieFilterOnChange=function(e){s.setState({inputValue:e.target.value})},s.filterSearch=function(e){var t=s.props.moviesSearch.filter((function(e){return e.title.toLowerCase().includes(s.state.inputValue.toLowerCase())}));t.length?(s.props.stateChange("error",""),s.props.stateChange("filteredMovies",t)):(s.props.stateChange("error","Sorry, we don't have that movie"),s.props.stateChange("filteredMovies",[]))},s.state={searchValue:"",inputValue:""},s}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("form",{action:"/",method:"get",className:"search-form",children:[Object(u.jsx)("label",{htmlFor:"header-search",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Search Movies"})}),Object(u.jsx)("input",{className:"search-input",type:"text",id:"header-search",value:this.inputValue,placeholder:"Search Movies",onChange:this.movieFilterOnChange,onKeyUp:function(t){return e.filterSearch(t)}})]})}}]),a}(s.Component)),k=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.setState({isLoading:!0}),x().then((function(t){return e.setState({movies:t.movies,isLoading:!1})})).catch((function(t){return e.setState({error:t.message,isLoading:!1})}))},e.stateChange=function(t,a){e.setState(Object(n.a)({},t,a))},e.state={movies:[],error:"",isLoading:!1,filteredMovies:[]},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.movies;t.error,t.isLoading;return Object(u.jsxs)("main",{className:"App",children:[Object(u.jsxs)("nav",{className:"nav-bar",children:[Object(u.jsx)("img",{src:"charles-deluvio-I6mx55jXOvM-unsplash.jpg",className:"popcorn",alt:"Spilt popcorn"}),Object(u.jsx)("div",{className:"nav-text",children:Object(u.jsx)("h2",{className:"header",children:"Rancid Tomatillos"})})]}),this.state.isLoading&&Object(u.jsx)("h3",{className:"error",children:"Loading Movies..."}),this.state.error&&Object(u.jsx)("h3",{className:"error",children:this.state.error}),Object(u.jsxs)(v.a,{exact:!0,path:"/",children:[Object(u.jsx)(w,{id:"search",moviesSearch:a,inputValue:this.state.inputValue,stateChange:this.stateChange}),Object(u.jsx)(m,{id:"movie",movies:a,filteredMovies:this.state.filteredMovies})]}),Object(u.jsx)(v.a,{exact:!0,path:"/:id",render:function(t){var a=t.match.params.id;return Object(u.jsx)(N,{selectedID:a,showAllMovies:e.showAllMovies,stateChange:e.stateChange})}})]})}}]),a}(s.Component);i.a.render(Object(u.jsxs)(d.a,{children:[" ",Object(u.jsx)(k,{})," "]}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f25afbdf.chunk.js.map